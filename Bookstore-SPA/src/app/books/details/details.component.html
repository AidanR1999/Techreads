<div class="container">
    <div class="card">
        <div class="container-fliud">
            <div class="wrapper row">
                <div class="preview col-md-6">
                    <div class="preview-pic tab-content">
                      <div class="tab-pane active" id="pic-1"><img src="{{model.url}}" /></div>
                      <br>
                    </div>
                        <button [disabled]="!loggedIn() || isRead" (click)="markRead()" type="submit" class="btn btn-primary">Add to history</button>
                        <p class="product-description" *ngIf="!loggedIn()">Login to add this book to your history</p>
                </div>
                <div class="details col-md-6">
                    <h3 class="product-title">{{model.title}}</h3>
                    <p class="review-no">{{model.authors}}</p>
                    <div class="rating">
                        <div class="stars" >
                            <ngb-rating [max]="5" [(rate)]="starRating" [readonly]="true"></ngb-rating>
                            <small>[{{model.ratings.length}}]</small>
                        </div>
                        <span class="review-no">{{model.reviews.length}} reviews</span>
                    </div>
                    <p class="product-description">{{model.description}}</p>
                    <p class="vote" *ngIf="calculateEnjoyed() > 0"><strong>{{calculateEnjoyed()}}%</strong> of buyers enjoyed this product! </p>
                    <p class="product-description"><strong>Category: </strong>{{model.category}} | <strong>Publisher: </strong>{{model.publisher}} | <strong>ISBN: </strong>{{model.isbn}}</p>

                    <h4>Rating Breakdown</h4>
                    <div class="pull-left">
                        <div class="pull-left" style="width:50px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">5 stars<span class="glyphicon glyphicon-star"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                              <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="2" aria-valuemin="0" aria-valuemax="5" style="width: {{ratingPerc[0]}}%">
                                <span class="sr-only"></span>
                              </div>
                            </div>
                        </div>
                        <div class="pull-left" style="margin-left:10px;">{{ratings[0]}} ratings</div>
                    </div>
                    <div class="pull-left">
                        <div class="pull-left" style="width:50px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">4 stars<span class="glyphicon glyphicon-star"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                              <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="4" aria-valuemin="0" aria-valuemax="5" style="width: {{ratingPerc[1]}}%">
                                <span class="sr-only"></span>
                              </div>
                            </div>
                        </div>
                        <div class="pull-left" style="margin-left:10px;">{{ratings[1]}} ratings</div>
                    </div>
                    <div class="pull-left">
                        <div class="pull-left" style="width:50px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">3 stars<span class="glyphicon glyphicon-star"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                              <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="3" aria-valuemin="0" aria-valuemax="5" style="width: {{ratingPerc[2]}}%">
                                <span class="sr-only"></span>
                              </div>
                            </div>
                        </div>
                        <div class="pull-left" style="margin-left:10px;">{{ratings[2]}} ratings</div>
                    </div>
                    <div class="pull-left">
                        <div class="pull-left" style="width:50px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">2 stars<span class="glyphicon glyphicon-star"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                              <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="2" aria-valuemin="0" aria-valuemax="5" style="width: {{ratingPerc[3]}}%">
                                <span class="sr-only"></span>
                              </div>
                            </div>
                        </div>
                        <div class="pull-left" style="margin-left:10px;">{{ratings[3]}} ratings</div>
                    </div>
                    <div class="pull-left">
                        <div class="pull-left" style="width:50px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">1 star<span class="glyphicon glyphicon-star"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                              <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="5" style="width: {{ratingPerc[4]}}%">
                                <span class="sr-only"></span>
                              </div>
                            </div>
                        </div>
                        <div class="pull-left" style="margin-left:10px;">{{ratings[4]}} ratings</div>
                    </div>
                </div>

                
            </div>
        </div>
    </div>
</div>

<br>

<div class="container" *ngIf="loggedIn() && !reviewed()">
    <app-create-review (reviewAdded)="newReview($event)"></app-create-review>
</div>
<br>
<div class="container">
    <h2>Reviews:</h2>
        <app-review *ngFor="let review of model.reviews" [model]="review"></app-review>
</div>

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">

